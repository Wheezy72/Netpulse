# NetPulse .env example
# Copy this file to `.env` and adjust values for your environment.
#
# For local non-Docker dev, ensure PostgreSQL and Redis are running on localhost.

# ------------------------------------------------------------------------------
# Core services
# ------------------------------------------------------------------------------

# PostgreSQL
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=netpulse
POSTGRES_USER=netpulse
POSTGRES_PASSWORD=netpulse

# Redis for Celery broker and result backend
REDIS_URL=redis://localhost:6379/0

# ------------------------------------------------------------------------------
# HTTP / CORS
# ------------------------------------------------------------------------------

# Allowed origins for the frontend.
# For Vite dev server and optional Docker/Nginx frontend:
CORS_ALLOW_ORIGINS='["http://localhost:5173","http://localhost:8080"]'

# ------------------------------------------------------------------------------
# Pulse (WAN health) targets
# ------------------------------------------------------------------------------

# Gateway (your home router / default gateway)
PULSE_GATEWAY_IP=192.168.124.2

# ISP edge / DNS (use whatever makes sense in your network)
PULSE_ISP_IP=8.8.8.8

# Cloudflare / external reference
PULSE_CLOUDFLARE_IP=1.1.1.1

# ------------------------------------------------------------------------------
# Auth / security
# ------------------------------------------------------------------------------

# JWT signing secret (use a long, random string in real setups)
SECRET_KEY=change-me-to-a-long-random-value
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=60

# ------------------------------------------------------------------------------
# AI Copilot
# ------------------------------------------------------------------------------

# Provider: "openai" or "gemini"
AI_PROVIDER=openai

# API key for the chosen provider (replace this with your real key)
AI_API_KEY=replace-with-your-ai-key

# Model name, e.g.:
#  - "gpt-4.1-mini" for OpenAI
#  - "gpt-4o-mini" for OpenAI
#  - "gemini-1.5-pro" for Gemini
AI_MODEL_NAME=gpt-4.1-mini

# ------------------------------------------------------------------------------
# Email alerts (optional)
# ------------------------------------------------------------------------------

# Enable email alerts (true/false)
ENABLE_EMAIL_ALERTS=false

# SMTP settings
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USERNAME=your-smtp-user
SMTP_PASSWORD=your-smtp-password

# From/To addresses for alerts
ALERT_EMAIL_FROM=netpulse@example.com
ALERT_EMAIL_TO=ops@example.com

# ------------------------------------------------------------------------------
# WhatsApp / webhook alerts (optional)
# ------------------------------------------------------------------------------

# Enable WhatsApp-style alerts (true/false)
ENABLE_WHATSAPP_ALERTS=false

# Generic webhook URL used to send WhatsApp-style messages
WHATSAPP_API_URL=https://your-whatsapp-gateway.example.com/api/messages

# Bearer token for authenticating to the WhatsApp gateway
WHATSAPP_API_TOKEN=replace-with-whatsapp-token

# Default recipient identifier (phone number or chat ID; depends on your gateway)
WHATSAPP_RECIPIENT=+1234567890

# ------------------------------------------------------------------------------
# Alert routing per event type
# Values: "email", "whatsapp", "both", or "none"
# ------------------------------------------------------------------------------

ALERT_VULN_CHANNEL=both      # new high/critical vulnerabilities
ALERT_SCAN_CHANNEL=none      # scan completion
ALERT_REPORT_CHANNEL=whatsapp  # WAN health reports
ALERT_HEALTH_CHANNEL=whatsapp  # Internet health degradation
ALERT_DEVICE_CHANNEL=none      # reserved for future device alerts

# ------------------------------------------------------------------------------
# WhatsApp message templates (Python str.format-style)
# Available placeholders: {subject}, {body}
# ------------------------------------------------------------------------------

WHATSAPP_MESSAGE_TEMPLATE="{subject}\n\n{body}"
WHATSAPP_VULN_TEMPLATE="[VULN ALERT]\n\n{subject}\n\n{body}"
WHATSAPP_SCAN_TEMPLATE="[SCAN]\n\n{subject}\n\n{body}"
WHATSAPP_REPORT_TEMPLATE="[REPORT]\n\n{subject}\n\n{body}"
WHATSAPP_HEALTH_TEMPLATE="[WAN HEALTH]\n\n{subject}\n\n{body}"
WHATSAPP_DEVICE_TEMPLATE="[DEVICE]\n\n{subject}\n\n{body}"

# ------------------------------------------------------------------------------
# Script allowlist
# ------------------------------------------------------------------------------

# If ALLOWED_PREBUILT_SCRIPTS is non-empty, only those scripts can be run
# via /api/scripts/prebuilt/run. If empty, any script in scripts/prebuilt is allowed.
#
# Example:
# ALLOWED_PREBUILT_SCRIPTS="backup_switch.py,wan_health_report.py,wan_health_pdf_report.py"
ALLOWED_PREBUILT_SCRIPTS=""

# ------------------------------------------------------------------------------
# Environment
# ------------------------------------------------------------------------------

ENVIRONMENT=development
APP_NAME="NetPulse Enterprise"